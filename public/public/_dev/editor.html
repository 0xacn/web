<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli&display=swap">
		<title>Editor</title>
		<style>
			* {
				font-family: Muli, sans-serif;
			}
			*:focus {
				outline: none;
			}
			#buttons {
				margin-bottom: 8px;
			}
			#buttons button {
				border: none;
				background: lightgray;
				padding: 4px 8px;
				border-radius: 5px;
				font-weight: bold;
				font-size: 12px;
				transition: 0.3s all;
			}
			#buttons button:focus {
				background: lightblue;
				color: white;
			}
			#editor {
				height: 100vh;
			}
			#editor img {
				border-radius: 10px;
			}
		</style>
	</head>
	<body>
		<div id="buttons">
			<button onclick="exec('bold')">Bold</button>
			<button onclick="exec('italic')">Italic</button>
			<button onclick="exec('underline')">Underline</button>
			<button onclick="exec('foreColor', prompt('Text color (hexadecimal)'))">Text color</button>
			<button onclick="exec('insertHorizontalRule')">Line</button>
			<button onclick="exec('insertOrderedList')">Ordered list</button>
			<button onclick="exec('insertUnorderedList')">Unordered list</button>
			<button onclick="exec('indent')">Indent</button>
			<button onclick="exec('outdent')">Outdent</button>
			<button onclick="exec('insertImage', prompt('Image URL'))">Insert image</button>
			<button onclick="exec('justifyLeft')">Left</button>
			<button onclick="exec('justifyCenter')">Center</button>
			<button onclick="exec('justifyRight')">Right</button>
			<button onclick="exec('subscript')">Subscript</button>
			<button onclick="exec('superscript')">Superscript</button>
			<button onclick="exec('removeFormat')">Remove formatting</button>
			<button onclick="exec('fontSize', 6)">Big font</button>
			<button onclick="exec('fontSize', 5)">Medium font</button>
			<button onclick="exec('fontSize', 3)">Normal font</button>
			<button onclick="exec('fontSize', 1)">Small font</button>
			<button onclick="insertMath()">Math</button>
			<button onclick="alert('Coming soon')">Code</button>
		</div>
		<div id="editor" contenteditable></div>
		<script>
			const editor = document.getElementById('editor')
			
			const exec = (command, payload = null) => {
				document.execCommand(command, false, payload)
				editor.focus()
			}
			
			const moveCursor = characters => {
				const selection = getSelection()
				if (selection.rangeCount > 0) {
					const textNode = selection.focusNode
					const newOffset = selection.focusOffset + characters
					selection.collapse(textNode, Math.min(textNode.length, newOffset));
				}
			}
			
			const insertMath = () => {
				const selection = getSelection()
				
				exec('insertText', `\\(${selection}\\)`)
				
				if (!selection.toString())
					moveCursor(-2)
			}
			
			editor.focus()
		</script>
	</body>
</html>
