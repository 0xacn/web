service firebase.storage {
	match /b/memorize-ai.appspot.com/o {
		match /users/{uid} {
			allow read
			allow write: if signedInWith(uid)
		}
		match /decks/{deckId} {
			allow read
			allow write: if signedIn()
		}
		match /static/{file} {
			allow read
		}
	}
	match /b/uploads.memorize.ai/o {
		match /{uid}/{file} {
			allow read
			allow write: if signedInWith(uid)
		}
	}
	
	function authId() {
		return request.auth.uid
	}

	function signedIn() {
		return request.auth != null
	}

	function signedInWith(uid) {
		return signedIn() && authId() == uid
	}
}